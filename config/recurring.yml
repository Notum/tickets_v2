# Recurring jobs configuration for Solid Queue
# See: https://github.com/rails/solid_queue#recurring-jobs

# Sync Ryanair destinations from RIX airport every hour
sync_ryanair_routes:
  class: SyncRyanairRoutesJob
  queue: default
  schedule: every hour

# Refresh all Ryanair flight prices every hour at :00
refresh_ryanair_prices:
  class: RefreshAllRyanairPricesJob
  queue: default
  schedule: every hour at minute 0

# Sync Bode.lv destinations every hour at :00
sync_bode_destinations:
  class: SyncBodeDestinationsJob
  queue: default
  schedule: every hour at minute 0

# Refresh all Bode.lv charter prices every hour at :00
refresh_bode_prices:
  class: RefreshAllBodePricesJob
  queue: default
  schedule: every hour at minute 0

# Sync AirBaltic destinations every hour at :30
sync_airbaltic_destinations:
  class: SyncAirbalticDestinationsJob
  queue: default
  schedule: every hour at minute 30

# Refresh all AirBaltic flight prices every hour at :00
refresh_airbaltic_prices:
  class: RefreshAllAirbalticPricesJob
  queue: default
  schedule: every hour at minute 0

# Sync Norwegian destinations twice daily (6:00 and 18:00)
sync_norwegian_destinations_morning:
  class: SyncNorwegianDestinationsJob
  queue: default
  schedule: every day at 6:00 Europe/Riga

sync_norwegian_destinations_evening:
  class: SyncNorwegianDestinationsJob
  queue: default
  schedule: every day at 18:00 Europe/Riga

# Prefetch Norwegian flight dates weekly (populates cache for date dropdowns)
prefetch_norwegian_dates:
  class: PrefetchNorwegianDatesJob
  queue: default
  schedule: every Sunday at 3:00 Europe/Riga

# Refresh Norwegian flight prices hourly (for user's tracked flights)
refresh_norwegian_prices:
  class: RefreshAllNorwegianPricesJob
  queue: default
  schedule: every hour at minute 0

# Refresh FlyDubai flight prices hourly (RIX-DXB route only)
refresh_flydubai_prices:
  class: RefreshAllFlydubaiPricesJob
  queue: default
  schedule: every hour at minute 0

# Refresh Turkish Airlines flight prices hourly (1-stop via Istanbul)
refresh_turkish_prices:
  class: RefreshAllTurkishPricesJob
  queue: default
  schedule: every hour at minute 0

# Refresh Booking.com hotel prices twice daily (8:00 and 20:00 Riga time)
refresh_booking_prices_morning:
  class: RefreshAllBookingPricesJob
  queue: default
  schedule: every day at 8:00 Europe/Riga

refresh_booking_prices_evening:
  class: RefreshAllBookingPricesJob
  queue: default
  schedule: every day at 20:00 Europe/Riga

# Cleanup expired flight searches daily at 1:00 AM Riga time
cleanup_expired_flights:
  class: CleanupExpiredFlightSearchesJob
  queue: default
  schedule: every day at 1:00 Europe/Riga

# Sync SS.COM regions weekly on Sunday at 4:00 AM
sync_ss_regions:
  class: SyncSsRegionsJob
  queue: default
  schedule: every Sunday at 4:00 Europe/Riga

# Check SS.COM followed ads twice daily (8:00 and 20:00 Riga time)
check_ss_followed_ads_morning:
  class: CheckSsFollowedAdsJob
  queue: default
  schedule: every day at 8:00 Europe/Riga

check_ss_followed_ads_evening:
  class: CheckSsFollowedAdsJob
  queue: default
  schedule: every day at 20:00 Europe/Riga

production:
  sync_ryanair_routes:
    class: SyncRyanairRoutesJob
    queue: default
    schedule: every hour

  refresh_ryanair_prices:
    class: RefreshAllRyanairPricesJob
    queue: default
    schedule: every hour at minute 0

  sync_bode_destinations:
    class: SyncBodeDestinationsJob
    queue: default
    schedule: every hour at minute 0

  refresh_bode_prices:
    class: RefreshAllBodePricesJob
    queue: default
    schedule: every hour at minute 0

  sync_airbaltic_destinations:
    class: SyncAirbalticDestinationsJob
    queue: default
    schedule: every hour at minute 30

  refresh_airbaltic_prices:
    class: RefreshAllAirbalticPricesJob
    queue: default
    schedule: every hour at minute 0

  # Sync Norwegian destinations twice daily (6:00 and 18:00)
  sync_norwegian_destinations_morning:
    class: SyncNorwegianDestinationsJob
    queue: default
    schedule: every day at 6:00 Europe/Riga

  sync_norwegian_destinations_evening:
    class: SyncNorwegianDestinationsJob
    queue: default
    schedule: every day at 18:00 Europe/Riga

  # Prefetch Norwegian flight dates weekly (populates cache for date dropdowns)
  prefetch_norwegian_dates:
    class: PrefetchNorwegianDatesJob
    queue: default
    schedule: every Sunday at 3:00 Europe/Riga

  # Refresh Norwegian flight prices hourly (for user's tracked flights)
  refresh_norwegian_prices:
    class: RefreshAllNorwegianPricesJob
    queue: default
    schedule: every hour at minute 0

  # Refresh FlyDubai flight prices hourly (RIX-DXB route only)
  refresh_flydubai_prices:
    class: RefreshAllFlydubaiPricesJob
    queue: default
    schedule: every hour at minute 0

  # Refresh Turkish Airlines flight prices hourly (1-stop via Istanbul)
  refresh_turkish_prices:
    class: RefreshAllTurkishPricesJob
    queue: default
    schedule: every hour at minute 0

  clear_solid_queue_finished_jobs:
    command: "SolidQueue::Job.clear_finished_in_batches(sleep_between_batches: 0.3)"
    schedule: every hour at minute 12

  # Refresh Booking.com hotel prices twice daily (8:00 and 20:00 Riga time)
  refresh_booking_prices_morning:
    class: RefreshAllBookingPricesJob
    queue: default
    schedule: every day at 8:00 Europe/Riga

  refresh_booking_prices_evening:
    class: RefreshAllBookingPricesJob
    queue: default
    schedule: every day at 20:00 Europe/Riga

  # Cleanup expired flight searches daily at 1:00 AM Riga time
  cleanup_expired_flights:
    class: CleanupExpiredFlightSearchesJob
    queue: default
    schedule: every day at 1:00 Europe/Riga

  # Sync SS.COM regions weekly on Sunday at 4:00 AM
  sync_ss_regions:
    class: SyncSsRegionsJob
    queue: default
    schedule: every Sunday at 4:00 Europe/Riga

  # Check SS.COM followed ads twice daily (8:00 and 20:00 Riga time)
  check_ss_followed_ads_morning:
    class: CheckSsFollowedAdsJob
    queue: default
    schedule: every day at 8:00 Europe/Riga

  check_ss_followed_ads_evening:
    class: CheckSsFollowedAdsJob
    queue: default
    schedule: every day at 20:00 Europe/Riga
