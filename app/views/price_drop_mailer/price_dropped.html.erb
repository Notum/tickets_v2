<div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 16px; font-size: 13px; color: #374151;">

  <div style="text-align: center; margin-bottom: 24px;">
    <div style="display: inline-block; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 8px 20px; border-radius: 50px; font-size: 11px; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase;">
      Price Drop Alert
    </div>
  </div>

  <p style="margin-bottom: 16px; font-size: 13px;">
    Hi <%= @user.email %>,
  </p>

  <p style="margin-bottom: 20px; font-size: 13px;">
    Great news! The following flight prices have dropped:
  </p>

  <% @price_drops.each do |drop| %>
    <div style="background: linear-gradient(135deg, #fafafa 0%, #f3f4f6 100%); border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #e5e7eb;">
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
        <div>
          <div style="font-weight: 600; font-size: 14px; color: #111827; margin-bottom: 2px;">
            <%= drop[:destination_name] %>
          </div>
          <div style="font-size: 11px; color: #6b7280; font-weight: 500;">
            RIX &rarr; <%= drop[:destination_code] %>
          </div>
        </div>
        <div style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); color: #166534; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700;">
          -&euro;<%= number_with_precision(drop[:savings], precision: 2) %>
        </div>
      </div>

      <div style="display: flex; gap: 16px; font-size: 12px;">
        <div style="flex: 1;">
          <div style="color: #9ca3af; font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Dates</div>
          <div style="color: #374151; font-weight: 500;"><%= drop[:date_out].strftime("%d %b") %> - <%= drop[:date_in].strftime("%d %b %Y") %></div>
        </div>
        <div style="text-align: right;">
          <div style="color: #9ca3af; font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;">Price</div>
          <div>
            <span style="color: #9ca3af; text-decoration: line-through; font-size: 11px;">&euro;<%= number_with_precision(drop[:previous_price], precision: 2) %></span>
            <span style="color: #059669; font-weight: 700; font-size: 14px; margin-left: 6px;">&euro;<%= number_with_precision(drop[:current_price], precision: 2) %></span>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <p style="color: #9ca3af; font-size: 11px; margin-top: 20px; text-align: center;">
    You receive alerts when prices drop by more than &euro;<%= number_with_precision(@user.price_notification_threshold, precision: 2) %>
  </p>

  <div style="border-top: 1px solid #e5e7eb; margin-top: 20px; padding-top: 16px; text-align: center;">
    <p style="color: #9ca3af; font-size: 10px; margin: 0;">
      Tickets@Petrucho.me
    </p>
  </div>
</div>
