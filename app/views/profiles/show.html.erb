<div class="card bg-base-100 shadow-xl">
  <div class="card-body p-4 sm:p-6">
    <h1 class="card-title text-xl sm:text-2xl">Profile Settings</h1>

    <div class="divider my-2 sm:my-4"></div>

    <div class="mb-4 sm:mb-6">
      <h2 class="text-base sm:text-lg font-semibold mb-2">Account Information</h2>
      <div class="bg-base-200 rounded-lg p-3 sm:p-4">
        <p class="text-sm text-base-content/70">Email</p>
        <p class="font-medium text-sm sm:text-base break-all"><%= @user.email %></p>
      </div>
    </div>

    <div class="divider my-2 sm:my-4"></div>

    <h2 class="text-base sm:text-lg font-semibold mb-3 sm:mb-4">Preferences</h2>

    <%= form_with model: @user, url: profile_path, method: :patch, class: "space-y-4" do |f| %>
      <% if @user.errors.any? %>
        <div class="alert alert-error text-sm">
          <ul class="list-disc list-inside">
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-control w-full">
        <%= f.label :currency, class: "label" do %>
          <span class="label-text text-sm">Currency for Booking.com</span>
        <% end %>
        <%= f.select :currency, User::CURRENCIES.map { |c| [c, c] }, {}, class: "select select-bordered w-full sm:w-48" %>
        <label class="label">
          <span class="label-text-alt text-xs sm:text-sm text-base-content/60">Currency used for hotel price tracking on Booking.com.</span>
        </label>
      </div>

      <div class="form-control w-full">
        <%= f.label :price_notification_threshold, class: "label" do %>
          <span class="label-text text-sm">Price Drop Notification Threshold</span>
        <% end %>
        <div class="join w-full sm:w-auto">
          <%= f.number_field :price_notification_threshold,
              step: 0.01,
              min: 0,
              class: "input input-bordered join-item w-full sm:w-48",
              placeholder: "5.00" %>
          <span class="btn btn-neutral join-item no-animation pointer-events-none"><%= @user.currency %></span>
        </div>
        <label class="label">
          <span class="label-text-alt text-xs sm:text-sm text-base-content/60">You will receive email notifications when a price drops by at least this amount.</span>
        </label>
      </div>

      <div class="form-control mt-4 sm:mt-6">
        <%= f.submit "Save Settings", class: "btn btn-primary w-full sm:w-auto" %>
      </div>
    <% end %>
  </div>
</div>
